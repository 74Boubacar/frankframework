scenario.description = Receiver test - exceed max retries, then programmatic retry
			   
include = ../../common.properties

manage.db.param1.name=expectedNumberOfResults
manage.db.param1.value=3
manage.db.param2.name=numberOfAttempts
manage.db.param2.value=30

manage.db2.param1.name=expectedNumberOfResults
manage.db2.param1.value=1
manage.db2.param2.name=numberOfAttempts
manage.db2.param2.value=30

manage.db3.param1.name=expectedNumberOfResults
manage.db3.param1.value=4
manage.db3.param2.name=numberOfAttempts
manage.db3.param2.value=30

# clear IbisTemp and IbisStore
step1.manage.db.write = common/md-delete.xml
step2.manage.db.read  = ../../common/md-delete-result.xml

#insert a record
step3.manage.db.write = common/md-insert.xml
step4.manage.db.read  = ../../common/md-insert-result.xml

step5.java.callback.read = ignore
step6.java.callback.writeline = <root forward="error"/>

step7.java.callback.read = ignore
step8.java.callback.writeline = <root forward="error"/>

# check that message has status 'Error'
step9.manage.db.write = common/md-select.xml
step10.manage.db.read  = ../common/result-error-2.xml

# update the status to 'Available', as a programmatic retry
step11.manage.db2.write = common/md-retry.xml
step12.manage.db2.read  = ../../common/retry-result.xml

step13.java.callback.read = ignore
step14.java.callback.writeline = <root forward="ready"/>

# check that message has status 'Done'
step15.manage.db3.write = common/md-select.xml
step16.manage.db3.read  = ../../common/result-done-3.xml
